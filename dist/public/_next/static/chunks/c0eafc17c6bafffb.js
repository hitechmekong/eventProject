(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41825,(e,t,o)=>{t.exports=e.r(71055)},6888,e=>{"use strict";var t=e.i(8452),o=e.i(4974),r=e.i(41825),u=e.i(94511);let a=(0,o.createContext)(void 0),l=({children:e})=>{let[l,s]=(0,o.useState)(null),[i,n]=(0,o.useState)(null),[h,c]=(0,o.useState)(!0),d=(0,r.useRouter)(),m=(0,r.usePathname)();(0,o.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");e&&t&&(n(e),s(JSON.parse(t)),u.default.defaults.headers.common.Authorization=`Bearer ${e}`),c(!1)},[]),(0,o.useEffect)(()=>{if(h)return;let e=["/login","/guest","/welcome","/"].some(e=>m===e||m?.startsWith("/guest"));i||e||d.push("/login")},[i,m,h,d]);let g=async(e,t)=>{let{token:o,user:r}=(await u.default.post("https://aqua-rabbit-826508.hostingersite.com/api/auth/login",{username:e,password:t})).data;localStorage.setItem("token",o),localStorage.setItem("user",JSON.stringify(r)),u.default.defaults.headers.common.Authorization=`Bearer ${o}`,n(o),s(r)};return(0,t.jsx)(a.Provider,{value:{user:l,token:i,login:g,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),delete u.default.defaults.headers.common.Authorization,n(null),s(null),d.push("/login")},isLoading:h,isAuthenticated:!!i},children:e})};e.s(["AuthProvider",0,l,"default",0,l,"useAuth",0,()=>{let e=(0,o.useContext)(a);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}])}]);